!function(){"use strict";window.Chatooly=window.Chatooly||{},Chatooly.styleInjection={cdnBase:"https://yaelren.github.io/chatooly-cdn",version:"2.0.0",isDevelopment:function(){return window.Chatooly&&Chatooly.utils?Chatooly.utils.isDevelopment():"localhost"===location.hostname||"127.0.0.1"===location.hostname||"::"===location.hostname||"[::1]"===location.hostname||"file:"===location.protocol||location.search.includes("dev=true")},getCDNUrl:function(o){if(this.isDevelopment()){const e=window.location.origin+window.location.pathname;return(e.includes("chatooly-cdn")?e.substring(0,e.indexOf("chatooly-cdn")+12):e.replace(/\/[^\/]*$/,""))+o}return this.cdnBase+o},inject:function(o){return o=o||{},document.getElementById("chatooly-unified-styles")?(console.log("Chatooly: Styles already loaded"),Promise.resolve()):(console.log("Chatooly: Injecting CDN v2.0.0 design system..."),new Promise((e,t)=>{const l=document.createElement("link");l.id="chatooly-unified-styles",l.rel="stylesheet",l.href=this.getCDNUrl("/css/unified.min.css"),l.onload=()=>{console.log("Chatooly: Design system loaded successfully ✅"),this.onStylesLoaded(o),e()},l.onerror=()=>{console.warn("Chatooly: Failed to load design system, continuing without ⚠️"),this.onStylesLoaded(o),e()};const n=document.querySelector('link[rel="stylesheet"], style');n&&n.parentNode?n.parentNode.insertBefore(l,n):document.head.appendChild(l),setTimeout(()=>{document.getElementById("chatooly-unified-styles")||(console.warn("Chatooly: Style loading timed out"),this.onStylesLoaded(o),e())},5e3)}))},onStylesLoaded:function(o){o=o||{},document.body.classList.add("chatooly-styles-loaded"),document.body.classList.add(`chatooly-v${this.version.replace(/\./g,"-")}`),o.layout?this.applyLayout(o.layout):window.ChatoolyConfig&&window.ChatoolyConfig.layout&&this.applyLayout(window.ChatoolyConfig.layout),o.theme?this.applyTheme(o.theme):window.ChatoolyConfig&&window.ChatoolyConfig.theme&&this.applyTheme(window.ChatoolyConfig.theme);const e=new CustomEvent("chatooly:styles-loaded",{detail:{version:this.version,options:o,timestamp:Date.now()}});document.dispatchEvent(e)},applyLayout:function(o){const e=["sidebar","tabs","modal","split","custom"];return e.includes(o)?(document.body.classList.add(`chatooly-layout-${o}`),console.log(`Chatooly: Applied ${o} layout`),!0):(console.warn(`Chatooly: Invalid layout "${o}". Valid layouts:`,e),!1)},applyTheme:function(o){const e=["light","dark","auto"];return e.includes(o)?(document.body.dataset.theme=o,document.body.classList.add(`chatooly-theme-${o}`),console.log(`Chatooly: Applied ${o} theme`),!0):(console.warn(`Chatooly: Invalid theme "${o}". Valid themes:`,e),!1)},isLoaded:function(){return null!==document.getElementById("chatooly-unified-styles")||document.body.classList.contains("chatooly-styles-loaded")},reload:function(){console.log("Chatooly: Reloading styles...");return document.querySelectorAll("#chatooly-unified-styles").forEach(o=>o.remove()),document.body.classList.remove("chatooly-styles-loaded"),document.body.className=document.body.className.replace(/chatooly-v\d+-\d+-\d+/g,""),this.inject()},getVariable:function(o){o.startsWith("--")||(o="--chatooly-"+o);return getComputedStyle(document.documentElement).getPropertyValue(o).trim()},setVariable:function(o,e){o.startsWith("--")||(o="--chatooly-"+o),document.documentElement.style.setProperty(o,e),console.log(`Chatooly: Set ${o} = ${e}`)},enableDevMode:function(){console.log("Chatooly: Development mode enabled"),document.body.classList.add("chatooly-dev-mode"),document.addEventListener("keydown",o=>{o.ctrlKey&&o.shiftKey&&"R"===o.key&&(o.preventDefault(),this.reload())}),this.logAvailableVariables()},logAvailableVariables:function(){const o=getComputedStyle(document.documentElement),e=[];for(let t=0;t<o.length;t++){const l=o[t];l.startsWith("--chatooly-")&&e.push({name:l,value:o.getPropertyValue(l).trim()})}e.length>0&&(console.group("Chatooly: Available CSS Variables"),e.forEach(o=>{console.log(`${o.name}: ${o.value}`)}),console.groupEnd())}},window.ChatoolyAutoInjected||(window.ChatoolyAutoInjected=!0,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){Chatooly.styleInjection.inject(),Chatooly.styleInjection.isDevelopment()&&Chatooly.styleInjection.enableDevMode()}):(Chatooly.styleInjection.inject(),Chatooly.styleInjection.isDevelopment()&&Chatooly.styleInjection.enableDevMode()))}();